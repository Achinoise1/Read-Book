<!DOCTYPE html>
<html>

<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <link rel="icon" href="/static/images/favicon.png" type="image/gif" />
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />

  <title>Bostorek</title>

  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.css" />
  <!-- font awesome style -->
  <link href="/static/css/font-awesome.min.css" rel="stylesheet" />

  <!-- Custom styles for this template -->
  <link href="/static/css/style.css" rel="stylesheet" />
  <!-- responsive style -->
  <link href="/static/css/responsive.css" rel="stylesheet" />

</head>

<body class="sub_page">

  <script src="/static/js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript">
        $(function(){  
            $("#test li").click(function() {
                $(this).siblings('li').removeClass('li-selected');  
                $(this).addClass('li-selected'); 
                $(this).siblings('li').attr('name','');
                $(this).attr('name','li-selected');
            });
        }); 
        </script>
        
  <div class="hero_area">
    <!-- header section strats -->
    <header class="header_section">
      <div class="container-fluid">
        <nav class="navbar navbar-expand-lg custom_nav-container ">
          <a class="navbar-brand" href="/">
            <span>
              Bostorek
            </span>
          </a>

          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class=""> </span>
          </button>

          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link pl-lg-0" href="/">Home </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/books"> Books</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/test">Test</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/statistics"> Statistics </a>
              </li>
              {%if status == 0 or status == 1%}
              <li class="nav-item active">
                <a class="nav-link" href="/login">Login <span class="sr-only">(current)</span> </a>
              </li>
              {%elif status == 2%}
              <li class="nav-item active">
                <a class="nav-link" href="/profile">Profile <span class="sr-only">(current)</span> </a>
              </li>
              {%endif%}
            </ul>
            <from class="search_form">
              <input type="text" class="form-control" placeholder="Search here...">
              <button class="" type="submit">
                <i class="fa fa-search" aria-hidden="true"></i>
              </button>
            </from>
          </div>
        </nav>
      </div>
    </header>
    <!-- end header section -->
  </div>


  <!-- catagory section -->

  <section id="s0" class="catagory_section layout_padding0">
    <div class="catagory_container">
        <div class="container ">
            <div class="heading_container heading_center">
                <h2>
                    测试开始
                  </h2>
                <p>
                tips
                </p>
                  <br><br>
            </div>
            {%if whole == 0%}
            <div class="row">
              <div class="col-sm-1 col-md-12">
                <div class="btn-box">
                  <a href="#s1">确认</a>
                </div>
              </div>
            </div>
            {%endif%}
        </div>
    </div>
  </section>

  <!--根据选项的多少空出相应大小的位置-->
  {%for i in range(0,10)%}
  {%if test[i]["Option_num"] == 4%}
  <section id="s{{i+1}}" class="catagory_section layout_padding3">
  {%endif%}
  {%if test[i]["Option_num"] == 2%}
  <section id="s{{i+1}}" class="catagory_section layout_padding4">
  {%endif%}
  <!--样式在style.css 57行附近-->
  {%if test[i]["Option_num"] == 3%}
  <section id="s{{i+1}}" class="catagory_section layout_padding5">
  {%endif%}
    <div class="catagory_container">
      <div class="container ">
        <div class="row">
          <div class="col-sm-6 col-md-3 ">
            <div class="box ">
              <div class="img-box">
                <h3><b>{{i+1}}</b></h3>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-9 ">
            <div>
                <h5>
                  题目：{{test[i]["Question"]}}
                </h5>
                <div class="box1 ">
                  <form method="post">
                    <ul id="test">
                  {%for j in range(0,test[i]["Option_num"])%}
                    <!--bootstrap.css 2427行附近-->
                    <li name="" class="ori" value="{{test[i]["Question"]}}">
                      {{head[j]}}. &nbsp; {{test[i]["Options"][j]}}
                    </li>
                  {%endfor%}
                    </ul>
                  </form>
                </div>
            </div>
          </div>
        </div>
        <!--最后一个加总提交样式-->
        <!-- 题数-1 -->
        {%if whole == 0%}
          {%if i == 9%}
          <br><br>
          <div class="btn-box">
            <!--a标签的样式已经被改成跟button差不多的玩意儿了-->
            <a href="#s{{i}}">上一题</a>
            <div>&emsp;</div>
            <!--整卷阅览需要把所有的上下题按钮藏起来-->
            <a href="/testLook">整卷阅览</a>
            <div>&emsp;</div>
            <a onclick="sub()">提交</a>
          </div>
          <!-- i>0, i<题数-1 -->
          {%elif i>0 and i<9%}
          <div class="btn-box">
            <!--a标签的样式已经被改成跟button差不多的玩意儿了-->
            <a href="#s{{i}}">上一题</a>
            <div>&emsp;</div>
            <a href="#s{{i+2}}">下一题</a>
          </div>
          {%else%}
          <div class="btn-box">
            <a href="#s{{i+2}}">下一题</a>
          </div>
          {%endif%}
        {%elif whole == 1 and i == 9%}
        <div class="btn-box">
          <a href="/testLook">整卷阅览</a>
          <div>&emsp;</div>
          <a onclick="sub()">提交</a>
        {%endif%}
      </div>
    </div>
  </section>
  {%endfor%}
  <!-- end catagory section -->
  
  <!-- info section -->

  <section class="info_section layout_padding2">
    <div class="container">
      <div class="row">
        <div class="col-md-6 col-lg-3 info-col">
          <div class="info_detail">
            <h4>
              About Us
            </h4>
            <p>
              Vitae aut explicabo fugit facere alias distinctio, exem commodi mollitia minusem dignissimos atque asperiores incidunt vel voluptate iste
            </p>
            <div class="info_social">
              <a href="">
                <i class="fa fa-facebook" aria-hidden="true"></i>
              </a>
              <a href="">
                <i class="fa fa-twitter" aria-hidden="true"></i>
              </a>
              <a href="">
                <i class="fa fa-linkedin" aria-hidden="true"></i>
              </a>
              <a href="">
                <i class="fa fa-instagram" aria-hidden="true"></i>
              </a>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 info-col">
          <div class="info_contact">
            <h4>
              Address
            </h4>
            <div class="contact_link_box">
              <a href="">
                <i class="fa fa-map-marker" aria-hidden="true"></i>
                <span>
                  Location
                </span>
              </a>
              <a href="">
                <i class="fa fa-phone" aria-hidden="true"></i>
                <span>
                  Call +01 1234567890
                </span>
              </a>
              <a href="">
                <i class="fa fa-envelope" aria-hidden="true"></i>
                <span>
                  demo@gmail.com
                </span>
              </a>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 info-col">
          <div class="info_contact">
            <h4>
              Newsletter
            </h4>
            <form action="#">
              <input type="text" placeholder="Enter email" />
              <button type="submit">
                Subscribe
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- end info section -->

  <!-- footer section -->
  <footer class="footer_section">
    <div class="container">
      <p>
        &copy; <span id="displayYear"></span> All Rights Reserved By
        <a href="https://html.design/">Free Html Templates</a>
      </p>
    </div>
  </footer>
  <!-- footer section -->

  <!-- jQery -->
  <script src="/static/js/jquery-3.4.1.min.js"></script>
  <!-- bootstrap js -->
  <script src="/static/js/bootstrap.js"></script>
  <!-- custom js -->
  <script src="/static/js/custom.js"></script>

  <script>
    function sub(){
        var num = [];
        var arr = [];

        $(".li-selected").each(function(){
          var va1 = $(this).attr('value');
          num.push(va1);
          var val = $(this).text();
          arr.push(val);
        });
        $.ajax({
            url:"http://127.0.0.1:5000/submit",
            type:"GET",
            /*请求方法是get不是post，why*/     
            /*headers: {
              "Content-Type": "application/json",
            } */              
            //data为要传递给后端的数据，使用JSON.stringify()转换为json格式
            dataType:"text",
            contentType:"application/json",
            data:JSON.stringify({
                    "title":    num,
                    "choice":   arr,
                }),
            success:function (data){
                alert("提交成功")
                $(window).attr("location","/process");
            },
            error:function (){
                alert("error")
                console.log("***********")
            }
        })
    }
</script>

</body>

</html>